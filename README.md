**ESPHydro - мультикомпонентная мультитиповая гидропонная система**
--------------------------------------------------------------------

Гидропонная мультитиповая установка (3 подвида EBB-Flow и Drip), построенная на базе ESP32. 
Данный репозиторий является блоком управления всей системы - прочие модули представлены в репозитории ESPHydro-Nodes.
Модули подключаются по протоколу UtilitaryRS (Top Level RS485).
В качестве органа управления и индикации - 4" сенсорный экран.

Используемые репозитории:
* [LovyanGFX](https://github.com/lovyan03/LovyanGFX) - драйверы для графических дисплеев и тач контроллеров
* [LVGL](https://github.com/lvgl/lvgl) - графический интерфейс для дисплея
* [UtilitaryRS](https://github.com/V-Nezlo/UtilitaryRS)  - протокол верхнего уровня для RS485, созданный в том числе для этого проекта
* [ESPHydro-Nodes](https://github.com/V-Nezlo/ESPHydro-Nodes) - ноды для данного блока управления
* [esp-idf-lib](https://github.com/UncleRus/esp-idf-lib) - драйверы RTC

Установка поддерживает два типа гидропонных установок - EBB-Flow и Drip. Исходя из опыта разработки гидропонных установок типа EBB было создано три подтипа EBB-Flow:

1. EBB-Normal - обычный режим EBB-Flow, вода циркулирует в течение всего периода орошения. Плюсы - постоянная циркуляция  воды в резервуаре, более активное перемешивание раствора и сниженное образование водорослей. Минусы - очень громко, не для жилых комнат. Насос работает весь цикл орошения
2. EBB-Swing - импульсное поддержание уровня воды в цикле орошения, включение по срабатыванию поплавкового уровня, отключение - по таймеру. Плюсы - ощутимо низкий уровень шума, уже приемлимо для жилой комнаты. Минусы - немного меньшее перемешивание раствора. Насос работает короткими импульсами
3. EBB-Dam - блокирующий режим работы. После полного затопления рабочей емкости электроклапан закрывает входно-выходное отверстие, насос отключается. Плюсы - самый тихий режим, насос работает только один раз за весь полный цикл. Минусы - стоячая вода на полный период орошения, возможно образование водорослей, отсутствие перемешивания раствора внутри рабочей емкости.

Установка имеет модульную конструкцию. Данный блок - блок управления - является хабом для прочих модулей. На данный момент модулей три - Upper, Lower и AUX.
- Upper: Верхняя часть установки. Включает в себя поплавковый уровень, определяющий факт полного затопления рабочей емкости, электромагнитный клапан для режима Dam и блок управления освещением.
- Lower: Нижнаяя часть установки (подразумевается как часть главного танка с водой). Определяет уровень воды в главном баке, а так же измеряет температуру, PH и PPM раствора. Так же управляет насосом и контролирует ток насоса.
- AUX: блок в разработке, по идее - единый блок для управления всем для компактных решений

Каждый блок передает свое состояние и флаги блоку управления. Соотвественно блок управления отображает всю информацию на экране.